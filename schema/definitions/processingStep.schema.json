{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Processing Step",
  "description": "Defines a single step in the processing pipeline.",
  "type": "object",
  "properties": {
    "stepId": {
      "type": "string",
      "description": "Unique identifier for this step within the pipeline (e.g., 'step-1', 'ica-run').",
      "pattern": "^[a-zA-Z0-9_-]+$"
    },
    "name": {
      "type": "string",
      "description": "Short, human-readable name for the step (e.g., 'High-pass Filter', 'ICA Decomposition')."
    },
    "description": {
      "type": "string",
      "description": "Detailed description of the step's purpose and actions."
    },
    "software": {
      "description": "Details of the software used to perform this step.",
      "$ref": "softwareDetails.schema.json"
    },
    "parameters": {
      "type": "array",
      "description": "List of parameters used in this step.",
      "items": {
        "$ref": "parameter.schema.json"
      }
    },
    "inputSources": {
      "type": "array",
      "description": "Identifies the input data sources for this step (e.g., previous stepId, file path).",
      "items": {"type": "string"}
    },
    "outputTargets": {
      "type": "array",
      "description": "Identifies the outputs generated by this step (e.g., derived file path, variable name).",
      "items": {"type": "string"}
    },
    "dependsOn": {
      "type": "array",
      "description": "List of stepIds that must be completed before this step can execute.",
      "items": {"type": "string"}
    },
    "qualityMetrics": {
      "description": "Optional object containing quality metrics specific to this step. Defined in #/definitions/qualityMetricsObject.",
      "$ref": "qualityMetricsObject.schema.json"
    }
  },
  "required": ["stepId", "name", "description", "software"]
} 